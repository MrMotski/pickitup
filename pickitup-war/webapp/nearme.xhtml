<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:a="http://richfaces.org/a4j"
	xmlns:s="http://jboss.com/products/seam/taglib"
	template="/layout/template.xhtml">
	<ui:param name="currentPage" value="nearme" />
	<ui:param name="includeGoogleMaps" value="true" />

	<ui:define name="content">
	
		<div class="container">
			 <!-- Main component for a primary marketing message or call to action -->
		      <div class="col-lg-3"></div>
		      <div class="col-lg-6 well">
		        <h1 style="text-align: center">Near Me</h1>
		        <div class="row">
		            <div class="col-lg-12" id="map-canvas" style="height: 300px;"></div>
		        </div>
		        <br/>
		        <div class="row">
		        	<ul class="nav nav-pills nav-justified">
					  <li class="active">
					    <a href="#" onclick="setTimeSpan(this,0)">
					      <span class="badge pull-right"></span>
					      Next 2 hours
					    </a>
					  </li>
					  <li>
					    <a href="#" onclick="setTimeSpan(this,1)">
					      <span class="badge pull-right"></span>
					      Today
					    </a>
					  </li>
					  <li>
					    <a href="#" onclick="setTimeSpan(this,2)">
					      <span class="badge pull-right">3</span>
					      Tomorrow
					    </a>
					  </li>
					  <li>
					    <a href="#" onclick="setTimeSpan(this,3)">
					      <span class="badge pull-right">3</span>
					      Next week
					    </a>
					  </li>
					</ul>
		        </div>
		        <div id="list"></div>
		        <a:form>
			        <a:jsFunction name="joinGame" action="#{GamesNearMe.joinGame(gameId)}" >
						<a:actionparam name="param1" assignTo="#{gameId}"/>
					</a:jsFunction>
					<a:jsFunction name="leaveGame" action="#{GamesNearMe.leaveGame(gameId)}" >
						<a:actionparam name="param1" assignTo="#{gameId}"/>
					</a:jsFunction>
		        </a:form>
		      </div>
		      <div class="col-lg-3"></div>
		</div>
		<!-- /container -->
	</ui:define>
	<ui:define name="pageJs">
	    <script>
	    	function toggleGameJoin(el,uniqueId){
				if ($(el).hasClass('joined')) {
					leaveGame(uniqueId);
					$(el).html('Join &#187;').removeClass('btn-danger').addClass('btn-primary');
				} else {
					joinGame(uniqueId);
					$(el).html('Leave &#187;').removeClass('btn-primary').addClass('btn-danger');
				}
				$(el).toggleClass('joined')
			}
			
	        $(function(){
	            nearMeMaps('#{GamesNearMe.locations}');
	        });
	    </script>
	    <script id="gameTemplate" type="x-tmpl-mustache">
<div class="row">
<div class="col-lg-12 well">
<h5>
<span class="badge" style="background-color: #AE4D4D; color: #000"></span> {{name}}<div class="pull-right">Posted By: <a href="#">{{creator.name}}</a></div>
</h5>
Comments: {{description}}
<br/>
<span style="font-weight: 600;">Date:</span> {{date}}
<br/><br/>
<div class="game-buttons">
{{#alreadyJoined}}<a class="btn btn-sm btn-danger btn-join joined" role="button" onclick="toggleGameJoin(this,{{uniqueId}})">Leave &#187;</a>{{/alreadyJoined}}
{{^alreadyJoined}}<a class="btn btn-sm btn-primary btn-join" role="button" onclick="toggleGameJoin(this,{{uniqueId}})">Join &#187;</a>{{/alreadyJoined}}
</div>
</div>
</div>

		</script>
	</ui:define>
</ui:composition>
